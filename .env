COMPOSE_PROJECT_NAME=sentry-self-hosted
# Set COMPOSE_PROFILES to "feature-complete" to enable all features
# To enable errors monitoring only, set COMPOSE_PROFILES=errors-only
# See https://develop.sentry.dev/self-hosted/optional-features/errors-only/
COMPOSE_PROFILES=feature-complete
SENTRY_EVENT_RETENTION_DAYS=90
# You can either use a port number or an IP:PORT combo for SENTRY_BIND
# See https://docs.docker.com/compose/compose-file/#ports for more
SENTRY_BIND=9000
# Set SENTRY_MAIL_HOST to a valid FQDN (host/domain name) to be able to send emails!
# SENTRY_MAIL_HOST=example.com
SENTRY_IMAGE=ghcr.io/getsentry/sentry:nightly
SNUBA_IMAGE=ghcr.io/getsentry/snuba:nightly
RELAY_IMAGE=ghcr.io/getsentry/relay:nightly
SYMBOLICATOR_IMAGE=ghcr.io/getsentry/symbolicator:nightly
TASKBROKER_IMAGE=ghcr.io/getsentry/taskbroker:nightly
VROOM_IMAGE=ghcr.io/getsentry/vroom:nightly
UPTIME_CHECKER_IMAGE=ghcr.io/getsentry/uptime-checker:nightly
#
# Dokploy-focused overrides (optional)
#
# Internal service URLs (override when services run externally)
# SNUBA_URL=http://snuba-api:1218
# VROOM_URL=http://vroom:8085
# KAFKA_BROKERS=kafka:9092
# REDIS_HOST=redis
# CLICKHOUSE_HOST=clickhouse
#
# Kafka listener customization
# KAFKA_CONTROLLER_QUORUM_VOTERS=1001@127.0.0.1:29093
# KAFKA_CLUSTER_ID=MkU3OEVBNTcwNTJENDM2Qk
# KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:29092,INTERNAL://0.0.0.0:9093,EXTERNAL://0.0.0.0:9092,CONTROLLER://0.0.0.0:29093
# KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://127.0.0.1:29092,INTERNAL://kafka:9093,EXTERNAL://kafka:9092
# KAFKA_EXTERNAL_PORT=9092
#
# Clickhouse port for healthcheck
# CLICKHOUSE_HTTP_PORT=8123
#
# SeaweedFS credentials and IP
# SEAWEEDFS_ACCESS_KEY_ID=sentry
# SEAWEEDFS_SECRET_ACCESS_KEY=sentry
# SEAWEEDFS_IP=127.0.0.1
#
# Sentry internal ports for healthchecks
# SENTRY_INTERNAL_PORT=9000
# SNUBA_INTERNAL_PORT=1218
# VROOM_INTERNAL_PORT=8085
#
# Vroom/S3 profile storage
# SENTRY_BUCKET_PROFILES=s3://profiles?region=us-east-1&endpoint=seaweedfs:8333&s3ForcePathStyle=true&disableSSL=true
# VROOM_AWS_ACCESS_KEY=sentry
# VROOM_AWS_SECRET_KEY=sentry
#
# Taskbroker
# TASKBROKER_KAFKA_CLUSTER=kafka:9092
# TASKBROKER_KAFKA_DEADLETTER_CLUSTER=kafka:9092
#
# Uptime-checker
# UPTIME_CHECKER_RESULTS_KAFKA_CLUSTER=kafka:9092
# UPTIME_CHECKER_REDIS_HOST=redis://redis:6379
#
# Volume management (set EXTERNAL_VOLUMES=false for non-external volumes)
# EXTERNAL_VOLUMES=true
# SENTRY_DATA_VOLUME_NAME=sentry-data
# SENTRY_POSTGRES_VOLUME_NAME=sentry-postgres
# SENTRY_REDIS_VOLUME_NAME=sentry-redis
# SENTRY_KAFKA_VOLUME_NAME=sentry-kafka
# SENTRY_CLICKHOUSE_VOLUME_NAME=sentry-clickhouse
# SENTRY_SEAWEEDFS_VOLUME_NAME=sentry-seaweedfs
HEALTHCHECK_INTERVAL=30s
HEALTHCHECK_TIMEOUT=1m30s
HEALTHCHECK_RETRIES=10
HEALTHCHECK_START_PERIOD=10s
HEALTHCHECK_FILE_INTERVAL=60s
HEALTHCHECK_FILE_TIMEOUT=10s
HEALTHCHECK_FILE_RETRIES=3
HEALTHCHECK_FILE_START_PERIOD=600s
# Set SETUP_JS_SDK_ASSETS to 1 to enable the setup of JS SDK assets
# SETUP_JS_SDK_ASSETS=1
#
# Sentry (and its' surrounding services) uses Statsd for metrics collection.
# It's also the proper way to monitor self-hosted Sentry systems.
# Set STATSD_ADDR to a valid IP:PORT combination to enable Statsd metrics collection.
# STATSD_ADDR=127.0.0.1:8125

# --- Traefik (optional) ---
# Public hostname for Sentry (required if using Traefik overlay)
# SENTRY_HOST=sentry.example.com
# Traefik shared network name
# TRAEFIK_NETWORK=traefik
# Enable Traefik labels (set to false to disable)
# TRAEFIK_ENABLE=true
# Traefik entrypoints (match your Traefik static config)
# TRAEFIK_ENTRYPOINT_WEB=web
# TRAEFIK_ENTRYPOINT_WEBSECURE=websecure
# ACME cert resolver name
# TRAEFIK_CERT_RESOLVER=letsencrypt
